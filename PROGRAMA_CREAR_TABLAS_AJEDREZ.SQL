/**
  Universidad Cenfotec
  Proyecto de Programacion de Bases de Datos
  Profesor:
    -Luis Monge
  Elaborado por:
    - Brandon Rutch Murillo

*/


/** Seccion drop tablas */

DROP TABLE JUGADOR CASCADE CONSTRAINTS;

DROP TABLE PARTIDA CASCADE CONSTRAINTS;

/** Seccion drop secuencias */

DROP SEQUENCE SEQ_PARTIDA;


/** TABLAS */

CREATE TABLE JUGADOR(
    ID_JUGADOR VARCHAR2(10) NOT NULL ,
    NOMBRE VARCHAR2(20)NOT NULL,
    APELLIDO VARCHAR2(20) NOT NULL,
    PARTIDAS_JUGADAS NUMBER NOT NULL,
    GANES NUMBER NOT NULL ,
    PERDIDAS NUMBER NOT NULL,
    EMPATES NUMBER NOT NULL,
CONSTRAINT PK_JUGADOR PRIMARY KEY (ID_JUGADOR)
);

CREATE TABLE PARTIDA(
    ID_PARTIDA NUMBER NOT NULL ,
    FILA NUMBER NOT NULL ,
    COL_A VARCHAR2(2),
    COL_B VARCHAR2(2),
    COL_C VARCHAR2(2),
    COL_D VARCHAR2(2),
    COL_E VARCHAR2(2),
    COL_F VARCHAR2(2),
    COL_G VARCHAR2(2),
    COL_H VARCHAR2(2),
   TURNO VARCHAR2(20),
	JUGADOR_BLANCAS VARCHAR2(10),
	JUGADOR_NEGRAS VARCHAR2(10),	
    RESULTADO VARCHAR2(20),
CONSTRAINT PK_PARTIDA PRIMARY KEY (ID_PARTIDA, FILA)
);

/** SEQUENCIAS */

CREATE SEQUENCE SEQ_PARTIDA
INCREMENT BY 1
START WITH 1
MAXVALUE 1000;


/** FOREIGN KEYS */

ALTER TABLE PARTIDA ADD CONSTRAINT FK_JUGADOR1 FOREIGN KEY (JUGADOR_BLANCAS) REFERENCES JUGADOR(ID_JUGADOR);

ALTER TABLE PARTIDA ADD CONSTRAINT FK_JUGADOR2 FOREIGN KEY (JUGADOR_NEGRAS) REFERENCES JUGADOR(ID_JUGADOR);

